name: Update Submodules

on:
  schedule:
    - cron: '0 0 * * *' # 매일 자정에 실행 (필요에 따라 조절)
  workflow_dispatch: # 수동 실행 가능

permissions:
  contents: write

jobs:
  update:
    if: github.repository != 'HBNU-SWUNIV/come-capstone25-overclocked_quartet'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          submodules: true
          fetch-depth: 0

      - name: Update submodules
        run: |
          git submodule update --remote --recursive

      - name: Commit and push if changed
        run: |
          git config --global user.name 'GitHub Actions Bot'
          git config --global user.email 'actions@github.com'
          git add .
          if ! git diff-index --quiet HEAD; then
            git commit -m "Auto-update submodules"
            git push
          fi
